<%= render partial: "shared/flyoutable_with_form", locals: { flyoutable: @item } %>
<ul class="stereo">
    <li>
        <h1 class="hdg hdg_1">Items</h1>
    </li>
    <li>
        <a href="#" class="js-flyout-trigger">New Item</a>
    </li>
</ul>
<ul class="filterBar">
    <li>
        <%= link_to "Alpha", items_path, class: 'filterBar-link' %>
    </li>
    <li>
        <%= link_to "Department", items_path(order: 'department'), class: 'filterBar-link' %>
    </li>
</ul>
<% if @items_by_concern == nil %>
    <ul class="vlist">
        <% @items.each do |item| %>
            <%= react_component(
                'Item',
                csrf: form_authenticity_token,
                departmentId: item.department.id,
                departmentName: item.department.name,
                itemId: item.id,
                itemName: item.name,
            ) %>
        <% end %>
    </ul>
<% else %>
    <% @items_by_concern.each do |department, department_items| %>
        <div class="concernGroup">
            <div class="concernGroup-hd">
                <h2><%= department.name %></h2>
            </div>
            <ul class="vlist">
                <% department_items.each do |item| %>
                    <%= react_component(
                        'Item',
                        csrf: form_authenticity_token,
                        departmentId: item.department.id,
                        departmentName: item.department.name,
                        itemId: item.id,
                        itemName: item.name,
                    ) %>
                <% end %>
            </ul>
        </div>
    <% end %>
<% end %>
